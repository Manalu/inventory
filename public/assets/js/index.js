!function e(t,a,s){function r(n,i){if(!a[n]){if(!t[n]){var d="function"==typeof require&&require;if(!i&&d)return d(n,!0);if(o)return o(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[n]={exports:{}};t[n][0].call(c.exports,function(e){var a=t[n][1][e];return r(a||e)},c,c.exports,e,t,a,s)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<s.length;n++)r(s[n]);return r}({"/home/asus/web/stock/node_modules/babel-runtime/core-js/json/stringify.js":[function(e,t,a){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":"/home/asus/web/stock/node_modules/core-js/library/fn/json/stringify.js"}],"/home/asus/web/stock/node_modules/babel-runtime/core-js/object/define-property.js":[function(e,t,a){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":"/home/asus/web/stock/node_modules/core-js/library/fn/object/define-property.js"}],"/home/asus/web/stock/node_modules/babel-runtime/helpers/classCallCheck.js":[function(e,t,a){"use strict";a.__esModule=!0,a.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],"/home/asus/web/stock/node_modules/babel-runtime/helpers/createClass.js":[function(e,t,a){"use strict";a.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));a.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(e,r.key,r)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}()},{"../core-js/object/define-property":"/home/asus/web/stock/node_modules/babel-runtime/core-js/object/define-property.js"}],"/home/asus/web/stock/node_modules/core-js/library/fn/json/stringify.js":[function(e,t,a){var s=e("../../modules/_core"),r=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(e){return r.stringify.apply(r,arguments)}},{"../../modules/_core":"/home/asus/web/stock/node_modules/core-js/library/modules/_core.js"}],"/home/asus/web/stock/node_modules/core-js/library/fn/object/define-property.js":[function(e,t,a){e("../../modules/es6.object.define-property");var s=e("../../modules/_core").Object;t.exports=function(e,t,a){return s.defineProperty(e,t,a)}},{"../../modules/_core":"/home/asus/web/stock/node_modules/core-js/library/modules/_core.js","../../modules/es6.object.define-property":"/home/asus/web/stock/node_modules/core-js/library/modules/es6.object.define-property.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_a-function.js":[function(e,t,a){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_an-object.js":[function(e,t,a){var s=e("./_is-object");t.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":"/home/asus/web/stock/node_modules/core-js/library/modules/_is-object.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_core.js":[function(e,t,a){var s=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=s)},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_ctx.js":[function(e,t,a){var s=e("./_a-function");t.exports=function(e,t,a){if(s(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,s){return e.call(t,a,s)};case 3:return function(a,s,r){return e.call(t,a,s,r)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":"/home/asus/web/stock/node_modules/core-js/library/modules/_a-function.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_descriptors.js":[function(e,t,a){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":"/home/asus/web/stock/node_modules/core-js/library/modules/_fails.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_dom-create.js":[function(e,t,a){var s=e("./_is-object"),r=e("./_global").document,o=s(r)&&s(r.createElement);t.exports=function(e){return o?r.createElement(e):{}}},{"./_global":"/home/asus/web/stock/node_modules/core-js/library/modules/_global.js","./_is-object":"/home/asus/web/stock/node_modules/core-js/library/modules/_is-object.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_export.js":[function(e,t,a){var s=e("./_global"),r=e("./_core"),o=e("./_ctx"),n=e("./_hide"),i=function(e,t,a){var d,l,c,u=e&i.F,f=e&i.G,m=e&i.S,b=e&i.P,p=e&i.B,h=e&i.W,y=f?r:r[t]||(r[t]={}),j=y.prototype,_=f?s:m?s[t]:(s[t]||{}).prototype;f&&(a=t);for(d in a)(l=!u&&_&&void 0!==_[d])&&d in y||(c=l?_[d]:a[d],y[d]=f&&"function"!=typeof _[d]?a[d]:p&&l?o(c,s):h&&_[d]==c?function(e){var t=function(t,a,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,s)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):b&&"function"==typeof c?o(Function.call,c):c,b&&((y.virtual||(y.virtual={}))[d]=c,e&i.R&&j&&!j[d]&&n(j,d,c)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,t.exports=i},{"./_core":"/home/asus/web/stock/node_modules/core-js/library/modules/_core.js","./_ctx":"/home/asus/web/stock/node_modules/core-js/library/modules/_ctx.js","./_global":"/home/asus/web/stock/node_modules/core-js/library/modules/_global.js","./_hide":"/home/asus/web/stock/node_modules/core-js/library/modules/_hide.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_fails.js":[function(e,t,a){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_global.js":[function(e,t,a){var s=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_hide.js":[function(e,t,a){var s=e("./_object-dp"),r=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,a){return s.f(e,t,r(1,a))}:function(e,t,a){return e[t]=a,e}},{"./_descriptors":"/home/asus/web/stock/node_modules/core-js/library/modules/_descriptors.js","./_object-dp":"/home/asus/web/stock/node_modules/core-js/library/modules/_object-dp.js","./_property-desc":"/home/asus/web/stock/node_modules/core-js/library/modules/_property-desc.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_ie8-dom-define.js":[function(e,t,a){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":"/home/asus/web/stock/node_modules/core-js/library/modules/_descriptors.js","./_dom-create":"/home/asus/web/stock/node_modules/core-js/library/modules/_dom-create.js","./_fails":"/home/asus/web/stock/node_modules/core-js/library/modules/_fails.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_is-object.js":[function(e,t,a){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_object-dp.js":[function(e,t,a){var s=e("./_an-object"),r=e("./_ie8-dom-define"),o=e("./_to-primitive"),n=Object.defineProperty;a.f=e("./_descriptors")?Object.defineProperty:function(e,t,a){if(s(e),t=o(t,!0),s(a),r)try{return n(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},{"./_an-object":"/home/asus/web/stock/node_modules/core-js/library/modules/_an-object.js","./_descriptors":"/home/asus/web/stock/node_modules/core-js/library/modules/_descriptors.js","./_ie8-dom-define":"/home/asus/web/stock/node_modules/core-js/library/modules/_ie8-dom-define.js","./_to-primitive":"/home/asus/web/stock/node_modules/core-js/library/modules/_to-primitive.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/_property-desc.js":[function(e,t,a){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],"/home/asus/web/stock/node_modules/core-js/library/modules/_to-primitive.js":[function(e,t,a){var s=e("./_is-object");t.exports=function(e,t){if(!s(e))return e;var a,r;if(t&&"function"==typeof(a=e.toString)&&!s(r=a.call(e)))return r;if("function"==typeof(a=e.valueOf)&&!s(r=a.call(e)))return r;if(!t&&"function"==typeof(a=e.toString)&&!s(r=a.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":"/home/asus/web/stock/node_modules/core-js/library/modules/_is-object.js"}],"/home/asus/web/stock/node_modules/core-js/library/modules/es6.object.define-property.js":[function(e,t,a){var s=e("./_export");s(s.S+s.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":"/home/asus/web/stock/node_modules/core-js/library/modules/_descriptors.js","./_export":"/home/asus/web/stock/node_modules/core-js/library/modules/_export.js","./_object-dp":"/home/asus/web/stock/node_modules/core-js/library/modules/_object-dp.js"}],"/home/asus/web/stock/resources/assets/js/core.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.Core=void 0;var r=s(e("babel-runtime/helpers/classCallCheck")),o=s(e("babel-runtime/helpers/createClass"));a.Core=function(){function e(){(0,r.default)(this,e),this.setupAjax(),this.setupAlertify(),this.setupForm()}return(0,o.default)(e,[{key:"setupAlertify",value:function(){alertify.defaults={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,frameless:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"slide",notifier:{delay:5,position:"top-right",closeButton:!1},glossary:{title:"Konfirmasi",ok:"OK",cancel:"Cancel"},theme:{input:"form-control",ok:"btn btn-primary",cancel:"btn btn-default"}}}},{key:"setupAjax",value:function(){$.ajaxSetup({statusCode:{403:function(){return alertify.error("Forbidden"),!1},404:function(){return alertify.error("Not found"),!1},500:function(){return alertify.error("Internal server error"),!1}},crossDomain:!1,dataType:"json",cache:!0,headers:{"X-CSRF-Token":$('meta[name="_t"]').attr("content")}})}},{key:"setupForm",value:function(){$.fn.serializeForm=function(){var e,t,a,s;return e=void 0,t=void 0,a=void 0,s=void 0,!(this.length<1)&&(e={},t=e,s=':input[type!="checkbox"][type!="radio"], input:checked',a=function(){var a,s,r,o;if(a=void 0,s=void 0,r=void 0,o=void 0,!this.disabled&&(o=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),s=o.length-1,a=$(this),o[0])){for(r=0;r<s;)t=t[o[r]]=t[o[r]]||(""===o[r+1]||"0"===o[r+1]?[]:{}),r++;void 0!==t.length?t.push(a.val()):t[o[s]]=a.val(),t=e}},this.filter(s).each(a),this.find(s).each(a),e)};var e=!1;$(".action-form").each(function(){var t=$(this),a=["GET","POST","PUT","PATCH","DELETE"];t.formValidation({framework:"bootstrap",icon:null}).on("success.form.fv",function(s){s.preventDefault();$(s.target).formValidation("disableSubmitButtons",!1);var r=t.find("[type=submit]").ladda();if(e)return alertify.warning("Another process is still running."),!1;var o=t.attr("http-type").toUpperCase();if(-1===a.indexOf(o))return alertify.warning("HTTP type not allowed."),!1;alertify.confirm("Submit data?",function(){e=!0;var a=t.find(":input");a.prop("readonly",!0),r.ladda("start");var s={};s.data=t.serializeForm(),$.ajax({type:o,data:s,url:t.data("url"),success:function(t){"success"===t.type?alertify.success(t.message):"warning"===t.type?alertify.warning(t.message):"error"===t.type?alertify.error(t.message):alertify.message(t.message),e=!1,a.prop("readonly",!1),r.ladda("stop"),"success"===t.type&&void 0!==t.redirect&&window.location.replace(t.redirect)},error:function(t,s,o){alertify.error(t.responseText),e=!1,a.prop("readonly",!1),r.ladda("stop")}})})}).on("err.form.fv",function(e,t){return alertify.error("Ada kesalahan pada form."),!1})})}}]),e}()},{"babel-runtime/helpers/classCallCheck":"/home/asus/web/stock/node_modules/babel-runtime/helpers/classCallCheck.js","babel-runtime/helpers/createClass":"/home/asus/web/stock/node_modules/babel-runtime/helpers/createClass.js"}],"/home/asus/web/stock/resources/assets/js/datatable.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.DataTable=void 0;var r=s(e("babel-runtime/helpers/classCallCheck")),o=s(e("babel-runtime/helpers/createClass"));a.DataTable=function(){function e(){if((0,r.default)(this,e),$(".table-grid").length){var t=this,a=document.createElement("link");document.getElementsByTagName("head")[0].appendChild(a),a.rel="stylesheet",a.type="text/css",a.href=window._root+"/lib/datatables.min.css",$.when($.getScript(window._root+"/lib/datatables.min.js"),$.Deferred(function(e){$(e.resolve)})).done(function(){t.initDatatable()})}}return(0,o.default)(e,[{key:"initDatatable",value:function(){$.extend($.fn.dataTable.ext.classes,{sWrapper:"dataTables_wrapper dt-bootstrap4"});var e=$(".table-grid"),t=$("#showModal"),a=t.find(".loading"),s=t.find(".error"),r=t.find("#modalContent"),o=$("#pageLoader");e.each(function(){var e=$(this),t=[];e.find("th").each(function(){var e=$(this),a={};a.data=e.data("id"),$.each(e.data(),function(e,t){"id"!==e&&(a[e]=t)}),t.push(a)}),e.dataTable({drawCallback:function(){$(".paginate_button").addClass("page-item"),$(".paginate_button a").addClass("page-link")},serverSide:!0,processing:!0,searchDelay:1e3,responsive:!0,ajax:{url:e.data("url"),data:function(e){e.date_start=$("input[name=date_from]").val(),e.date_end=$("input[name=date_to]").val()}},columns:t,pageLength:50,autoWidth:!1,order:[0,"desc"]}),$("#dateSearch").on("click",function(){e.api().draw()}),e.on("click",".btn-show",function(e){e.preventDefault();var t=$(this);a.show(),s.hide(),r.empty(),$.ajax({type:"get",dataType:"html",url:t.data("url"),success:function(e){a.hide(),r.html(e)},error:function(e,t,r){a.hide(),s.show(),console.log(e.responseText)}})}),e.on("click",".btn-delete",function(e){e.preventDefault();var t=$(this);alertify.confirm("Konfirmasi","Hapus Data?",function(){o.show(),$.ajax({type:"delete",url:t.data("url"),success:function(e){o.hide(),"success"===e.type?alertify.success(e.message):"warning"===e.type?alertify.warning(e.message):"error"===e.type?alertify.error(e.message):alertify.message(e.message),"success"===e.type&&t.parents("tr").remove()},error:function(e,t,a){o.hide(),alertify.error(e.responseText)}})},function(){alertify.warning("Batal hapus data.")})})})}}]),e}()},{"babel-runtime/helpers/classCallCheck":"/home/asus/web/stock/node_modules/babel-runtime/helpers/classCallCheck.js","babel-runtime/helpers/createClass":"/home/asus/web/stock/node_modules/babel-runtime/helpers/createClass.js"}],"/home/asus/web/stock/resources/assets/js/index.js":[function(e,t,a){"use strict";var s=e("./core"),r=e("./datatable"),o=e("./purchase"),n=e("./sales");if(new s.Core,new r.DataTable,new o.Purchase,new n.Sales,MyApp.helpers(["datepicker","select2"]),$("#regionForm").length){var i=$("#regionForm"),d=i.find("[name=is_parent]"),l=i.find("#parentSelector");d.is(":checked")?l.fadeOut():l.fadeIn(),d.on("change",function(){$(this).is(":checked")?l.fadeOut():l.fadeIn()})}},{"./core":"/home/asus/web/stock/resources/assets/js/core.js","./datatable":"/home/asus/web/stock/resources/assets/js/datatable.js","./purchase":"/home/asus/web/stock/resources/assets/js/purchase.js","./sales":"/home/asus/web/stock/resources/assets/js/sales.js"}],"/home/asus/web/stock/resources/assets/js/purchase.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.Purchase=void 0;var r=s(e("babel-runtime/core-js/json/stringify")),o=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass"));a.Purchase=function(){function e(){(0,o.default)(this,e),$("#debtForm").length&&this.initDebtForm(),$("#purchaseForm").length&&this.initPurchaseForm()}return(0,n.default)(e,[{key:"initDebtForm",value:function(){var e=$("#debtForm"),t=e.find("[name=is_supplier]"),a=e.find("#supplierContainer"),s=e.find("#otherContainer");t.is(":checked")?(a.fadeIn(),s.fadeOut()):(a.fadeOut(),s.fadeIn()),t.on("change",function(){$(this).is(":checked")?(a.fadeIn(),s.fadeOut()):(a.fadeOut(),s.fadeIn())})}},{key:"initPurchaseForm",value:function(){var e=$("#purchaseForm"),t=e.find("#itemList"),a=e.find("#inputItemPrice"),s=e.find("#inputItemQuantity"),o=e.find("#discountType"),n=e.find("#discountNominalContainer"),i=n.find("#inputDiscountNominal"),d=e.find("#discountPercentContainer"),l=d.find("#inputDiscountPercent"),c=e.find("#lastPrice");n.hide(),d.hide();var u=t.find(":selected");c.is(":checked")?a.val(u.data("last")):a.val(u.data("price")),c.on("change",function(){u=t.find(":selected"),$(this).is(":checked")?a.val(u.data("last")):a.val(u.data("price"))}),t.on("select2:select",function(){u=t.find(":selected"),c.is(":checked")?a.val(u.data("last")):a.val(u.data("price"))}),o.on("change",function(){var e=$(this);"nominal"==e.val()?(n.show(),d.hide()):"percent"==e.val()?(n.hide(),d.show()):(n.hide(),d.hide())});var f=$("#itemTableData"),m=0,b=f.find("#totalLabel");e.find("#addItemBtn").on("click",function(){var e=t.find(":selected"),r=a.val(),n=s.val();if(""==r||""==n)return alertify.alert("Harga / kuantitas kosong."),!1;if(n=parseInt(n),r=parseFloat(r),isNaN(r)||r<=0||isNaN(n)||n<=0)return alertify.alert("Harga / kuantitas tidak boleh sama dengan, atau dibawah, 0."),!1;var d=r*n,c=o.val(),u=0;if("nominal"==c){if(u=parseFloat(i.val()),isNaN(u)||u<=0)return alertify.alert("Nominal diskon tidak boleh sama dengan, atau dibawah, 0."),!1}else if("percent"==c){var p=parseFloat(l.val());if(isNaN(p)||p<=0||p>=100)return alertify.alert("Nominal persen harus antara 0 sampai 100."),!1;u=p/100*d}var h=d-u;if(h<0)return alertify.alert("Total terakhir tidak boleh dibawah 0. ("+h.toFixed(0)+")"),!1;m+=h;var y='\n        <tr>\n          <td data-id="itemName">'+e.data("name")+'</td>\n          <td data-id="itemCode">'+e.data("code")+'</td>\n          <td data-id="itemQuantity">'+n+'</td>\n          <td data-id="itemPrice">'+r.toFixed(0)+'</td>\n          <td data-id="itemDiscount">'+u.toFixed(0)+'</td>\n          <td data-id="itemTotal">'+h.toFixed(0)+'</td>\n          <td><button class="btn btn-danger btn-xs btn-delete" title="Hapus Item"><i class="fa fa-times"></i></button></td>\n        </tr>\n      ';f.find("tbody").append(y),b.text(m.toFixed(0))}),f.on("click",".btn-delete",function(){var e=$(this);alertify.confirm("Hapus Item","Yakin menghapus item?",function(){var t=e.closest("tr"),a=parseFloat(t.find("[data-id=itemTotal]").text());(m-=a)<0&&(m=0),b.text(m.toFixed(0)),t.remove()},function(){alertify.warning("Tidak jadi menghapus ITEM.")})});var p=e.find("#hasComplete"),h=e.find(".debt-container");p.is(":checked")?h.fadeOut():h.fadeIn(),p.on("change",function(){$(this).is(":checked")?h.fadeOut():h.fadeIn()});var y=$("#submitBtn"),j=!1;y.on("click",function(){alertify.confirm("Konfirmasi","Buat data pembelian?",function(){var t=new Array;return j?(alertify.error("Ada data yang sedang berjalan."),!1):(f.find("> tbody > tr").each(function(){var e=$(this),a={item_name:e.find("[data-id=itemName]").text(),item_code:e.find("[data-id=itemCode]").text(),quantity:e.find("[data-id=itemQuantity]").text(),price:e.find("[data-id=itemPrice]").text(),discount:e.find("[data-id=itemDiscount]").text(),total:e.find("[data-id=itemTotal]").text()};t.push(a)}),t.length<=0?(alertify.error("Tidak ada data penjualan."),!1):(y.ladda(),y.ladda("start"),j=!0,void $.ajax({type:"PUT",url:e.data("url"),data:{purchase_info:(0,r.default)(t),data:e.serializeForm()},success:function(e){"success"===e.type?alertify.success(e.message):"warning"===e.type?alertify.warning(e.message):"error"===e.type?alertify.error(e.message):alertify.message(e.message),j=!1,y.ladda("stop"),"success"===e.type&&void 0!==e.redirect&&window.location.replace(e.redirect)},error:function(e,t,a){alertify.error(e.responseText),j=!1,y.ladda("stop")}})))},function(){alertify.warning("Batal")})})}}]),e}()},{"babel-runtime/core-js/json/stringify":"/home/asus/web/stock/node_modules/babel-runtime/core-js/json/stringify.js","babel-runtime/helpers/classCallCheck":"/home/asus/web/stock/node_modules/babel-runtime/helpers/classCallCheck.js","babel-runtime/helpers/createClass":"/home/asus/web/stock/node_modules/babel-runtime/helpers/createClass.js"}],"/home/asus/web/stock/resources/assets/js/sales.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.Sales=void 0;var r=s(e("babel-runtime/core-js/json/stringify")),o=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass"));a.Sales=function(){function e(){(0,o.default)(this,e),$("#receivableForm").length&&this.initReceivableForm(),$("#salesForm").length&&this.initSalesForm()}return(0,n.default)(e,[{key:"initReceivableForm",value:function(){var e=$("#receivableForm"),t=e.find("[name=is_client]"),a=e.find("#clientContainer"),s=e.find("#otherContainer");t.is(":checked")?(a.fadeIn(),s.fadeOut()):(a.fadeOut(),s.fadeIn()),t.on("change",function(){$(this).is(":checked")?(a.fadeIn(),s.fadeOut()):(a.fadeOut(),s.fadeIn())})}},{key:"initSalesForm",value:function(){var e=$("#salesForm"),t=e.find("#itemList"),a=e.find("#inputItemPrice"),s=e.find("#inputItemQuantity"),o=e.find("#discountType"),n=e.find("#discountNominalContainer"),i=n.find("#inputDiscountNominal"),d=e.find("#discountPercentContainer"),l=d.find("#inputDiscountPercent"),c=e.find("#lastPrice");n.hide(),d.hide();var u=t.find(":selected");c.is(":checked")?a.val(u.data("last")):a.val(u.data("price")),c.on("change",function(){u=t.find(":selected"),$(this).is(":checked")?a.val(u.data("last")):a.val(u.data("price"))}),t.on("select2:select",function(){u=t.find(":selected"),c.is(":checked")?a.val(u.data("last")):a.val(u.data("price"))}),o.on("change",function(){var e=$(this);"nominal"==e.val()?(n.show(),d.hide()):"percent"==e.val()?(n.hide(),d.show()):(n.hide(),d.hide())});var f=$("#itemTableData"),m=0,b=f.find("#totalLabel");e.find("#addItemBtn").on("click",function(){var e=t.find(":selected"),r=a.val(),n=s.val();if(""==r||""==n)return alertify.alert("Harga / kuantitas kosong."),!1;if(n=parseInt(n),r=parseFloat(r),isNaN(r)||r<=0||isNaN(n)||n<=0)return alertify.alert("Harga / kuantitas tidak boleh sama dengan, atau dibawah, 0."),!1;var d=r*n,c=o.val(),u=0;if("nominal"==c){if(u=parseFloat(i.val()),isNaN(u)||u<=0)return alertify.alert("Nominal diskon tidak boleh sama dengan, atau dibawah, 0."),!1}else if("percent"==c){var p=parseFloat(l.val());if(isNaN(p)||p<=0||p>=100)return alertify.alert("Nominal persen harus antara 0 sampai 100."),!1;u=p/100*d}var h=d-u;if(h<0)return alertify.alert("Total terakhir tidak boleh dibawah 0. ("+h.toFixed(0)+")"),!1;m+=h;var y='\n        <tr>\n          <td data-id="itemName">'+e.data("name")+'</td>\n          <td data-id="itemCode">'+e.data("code")+'</td>\n          <td data-id="itemQuantity">'+n+'</td>\n          <td data-id="itemPrice">'+r.toFixed(0)+'</td>\n          <td data-id="itemDiscount">'+u.toFixed(0)+'</td>\n          <td data-id="itemTotal">'+h.toFixed(0)+'</td>\n          <td><button class="btn btn-danger btn-xs btn-delete" title="Hapus Item"><i class="fa fa-times"></i></button></td>\n        </tr>\n      ';f.find("tbody").append(y),b.text(m.toFixed(0))}),f.on("click",".btn-delete",function(){var e=$(this);alertify.confirm("Hapus Item","Yakin menghapus item?",function(){var t=e.closest("tr"),a=parseFloat(t.find("[data-id=itemTotal]").text());(m-=a)<0&&(m=0),b.text(m.toFixed(0)),t.remove()},function(){alertify.warning("Tidak jadi menghapus ITEM.")})});var p=e.find("#hasComplete"),h=e.find(".receivable-container");p.is(":checked")?h.fadeOut():h.fadeIn(),p.on("change",function(){$(this).is(":checked")?h.fadeOut():h.fadeIn()});var y=$("#submitBtn"),j=!1;y.on("click",function(){alertify.confirm("Konfirmasi","Buat data penjualan?",function(){var t=new Array;return j?(alertify.error("Ada data yang sedang berjalan."),!1):(f.find("> tbody > tr").each(function(){var e=$(this),a={item_name:e.find("[data-id=itemName]").text(),item_code:e.find("[data-id=itemCode]").text(),quantity:e.find("[data-id=itemQuantity]").text(),price:e.find("[data-id=itemPrice]").text(),discount:e.find("[data-id=itemDiscount]").text(),total:e.find("[data-id=itemTotal]").text()};t.push(a)}),t.length<=0?(alertify.error("Tidak ada data penjualan."),!1):(y.ladda(),y.ladda("start"),j=!0,void $.ajax({type:"PUT",url:e.data("url"),data:{sales_info:(0,r.default)(t),data:e.serializeForm()},success:function(e){"success"===e.type?alertify.success(e.message):"warning"===e.type?alertify.warning(e.message):"error"===e.type?alertify.error(e.message):alertify.message(e.message),j=!1,y.ladda("stop"),"success"===e.type&&void 0!==e.redirect&&window.location.replace(e.redirect)},error:function(e,t,a){alertify.error(e.responseText),j=!1,y.ladda("stop")}})))},function(){alertify.warning("Batal")})})}}]),e}()},{"babel-runtime/core-js/json/stringify":"/home/asus/web/stock/node_modules/babel-runtime/core-js/json/stringify.js","babel-runtime/helpers/classCallCheck":"/home/asus/web/stock/node_modules/babel-runtime/helpers/classCallCheck.js","babel-runtime/helpers/createClass":"/home/asus/web/stock/node_modules/babel-runtime/helpers/createClass.js"}]},{},["/home/asus/web/stock/resources/assets/js/index.js"]);